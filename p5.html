<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">  
    <title>vanity</title>
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>

    </style>
  </head>
  <body class="text-bg-dark" style="color: #fff;background: #000;">
    <div id="myContainer" style="position: fixed;top: 0;right: 0;left: 0;"></div>
    
    <main>
      <div class="single-page"></div>
      <div class="single-page container text-center">
        <div class="row" style="height:-moz-available;height:-webkit-fill-available;height:fill-available;">
          <div class="col align-self-center">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/pOZhPz92Dic?autoplay=1&mute=1&loop=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        </div>
      </div>


      <!-- Marketing messaging and featurettes
      ================================================== -->
      <!-- Wrap the rest of the page in another container to center all the content. -->

      <div class="container marketing">
        <!-- Three columns of text below the carousel -->
        <div class="row">
          <div class="col-lg-4">
            <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 140x140" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#777"></rect><text x="50%" y="50%" fill="#777" dy=".3em">140x140</text></svg>

            <h2 class="fw-normal">Heading</h2>
            <p>Some representative placeholder content for the three columns of text below the carousel. This is the first column.</p>
            <p><a class="btn btn-secondary" href="#">View details »</a></p>
          </div><!-- /.col-lg-4 -->
          <div class="col-lg-4">
            <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 140x140" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#777"></rect><text x="50%" y="50%" fill="#777" dy=".3em">140x140</text></svg>

            <h2 class="fw-normal">Heading</h2>
            <p>Another exciting bit of representative placeholder content. This time, we've moved on to the second column.</p>
            <p><a class="btn btn-secondary" href="#">View details »</a></p>
          </div><!-- /.col-lg-4 -->
          <div class="col-lg-4">
            <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 140x140" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#777"></rect><text x="50%" y="50%" fill="#777" dy=".3em">140x140</text></svg>

            <h2 class="fw-normal">Heading</h2>
            <p>And lastly this, the third column of representative placeholder content.</p>
            <p><a class="btn btn-secondary" href="#">View details »</a></p>
          </div><!-- /.col-lg-4 -->
        </div><!-- /.row -->


        <!-- START THE FEATURETTES -->

        <hr class="featurette-divider">

        <div class="row featurette">
          <div class="col-md-7">
            <h2 class="featurette-heading fw-normal lh-1">First featurette heading. <span class="text-muted">It’ll blow your mind.</span></h2>
            <p class="lead">Some great placeholder content for the first featurette here. Imagine some exciting prose here.</p>
          </div>
          <div class="col-md-5">
            <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"></rect><text x="50%" y="50%" fill="#aaa" dy=".3em">500x500</text></svg>

          </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
          <div class="col-md-7 order-md-2">
            <h2 class="featurette-heading fw-normal lh-1">Oh yeah, it’s that good. <span class="text-muted">See for yourself.</span></h2>
            <p class="lead">Another featurette? Of course. More placeholder content here to give you an idea of how this layout would work with some actual real-world content in place.</p>
          </div>
          <div class="col-md-5 order-md-1">
            <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"></rect><text x="50%" y="50%" fill="#aaa" dy=".3em">500x500</text></svg>

          </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
          <div class="col-md-7">
            <h2 class="featurette-heading fw-normal lh-1">And lastly, this one. <span class="text-muted">Checkmate.</span></h2>
            <p class="lead">And yes, this is the last block of representative placeholder content. Again, not really intended to be actually read, simply here to give you a better view of what this would look like with some actual content. Your content.</p>
          </div>
          <div class="col-md-5">
            <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"></rect><text x="50%" y="50%" fill="#aaa" dy=".3em">500x500</text></svg>

          </div>
        </div>

        <hr class="featurette-divider">

        <!-- /END THE FEATURETTES -->

      </div><!-- /.container -->


      <!-- FOOTER -->
      <footer class="container">
        <p class="float-end"><a href="#">Back to top</a></p>
        <p>© 2017–2022 Company, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p>
      </footer>
    </main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js" integrity="sha512-WJXVjqeINVpi5XXJ2jn0BSCfp0y80IKrYh731gLRnkAS9TKc5KNt/OfLtu+fCueqdWniouJ1ubM+VI/hbo7POQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript">
// disable mobile pinch zoom
document.addEventListener('gesturestart', function (e) {
  e.preventDefault();
});

let docHeight;

function getDocHeight() {
  docHeight = Math.max(
    document.body.scrollHeight, document.documentElement.scrollHeight,
    document.body.offsetHeight, document.documentElement.offsetHeight,
    document.body.clientHeight, document.documentElement.clientHeight
  );
  docHeight-=innerHeight;
  console.log('Full document height, with scrolled out part: ' + docHeight);
  console.log('windowHeight: ' + innerHeight);
}
function setElementHeights(){
  let windowHeight = innerHeight+"px";
  let elements = document.getElementsByClassName("single-page");
  for (let el in elements){
    if(elements.hasOwnProperty(el))
      elements[el].style.height = windowHeight;
  }
}
function getScrollPos() {
  console.log('Current scroll from the top: ' + window.pageYOffset);
  console.log(window.pageYOffset/docHeight);
}

window.onresize = function() {
  getDocHeight();
  setElementHeights();
};
window.onscroll = function() {getScrollPos()};
getDocHeight();
setElementHeights();
</script>

<script type="text/javascript">
let imgTemplate, img;
let canvasDotWidth, canvasDotHeight;
let imgStartWidth, imgEndWidth, imgStartHeight, imgEndHeight;
let noiseScaleX = 1, noiseScaleY = 2.4;
let halfToneSize = 5;
let t=0;
let lod=0, falloff=0;
let stepSize = 6; // between ellipses
let imgWidth,imgHeight;

function resizeImage(){
  canvasDotWidth = width / stepSize + 1;
  canvasDotHeight = height / stepSize + 1;
  let imgDotWidth;
  if (width>height){
    imgWidth = width*0.5;
    imgDotWidth = imgWidth/stepSize;
  }
  else{
    imgWidth = width*0.8;
    imgDotWidth = imgWidth/stepSize;
  }
  imgHeight = imgTemplate.height/imgTemplate.width*imgWidth;
  //img.resize(imgDotWidth,0);
  imgStartWidth = floor((canvasDotWidth-imgDotWidth)/2);
  imgEndWidth = floor(imgStartWidth + imgDotWidth);
  let imgDotHeight = imgTemplate.height*imgDotWidth/imgTemplate.width;
  imgStartHeight = floor((canvasDotHeight - imgDotHeight) / 2);
  imgEndHeight = floor(imgStartHeight + imgDotHeight);

  img = createImage(imgTemplate.width, imgTemplate.height);
  img.copy(imgTemplate, 0, 0, imgTemplate.width, imgTemplate.height, 0, 0, imgTemplate.width, imgTemplate.height);
  img.resize(imgDotWidth,0);
  img.loadPixels();
}

function stateT(){
  // console.log(innerHeight - window.pageYOffset);
  return constrain(1-window.pageYOffset/innerHeight,0,1);
}

function preload() {
  //img = loadImage('resources/test/kult_50.png');
  imgTemplate = loadImage('resources/test/kult_50.png');
}

function setup() {
  let myCanvas = createCanvas(windowWidth, windowHeight);
  myCanvas.parent('myContainer');
  frameRate(14);
  //noiseDetail(8, 0.65);
  resizeImage();
  console.log("img:"+img.width+", "+img.height);
  console.log("dotCanvas:"+canvasDotWidth+", "+canvasDotHeight);
  console.log("size:"+width+", "+height);
  noiseDetail(0.5,0.5);
}

function draw() {
  background(0);
  fill(255);
  noStroke();

  // lod=map(mouseX, 0, width, 0, 10);
  // falloff=map(mouseY, 0, height, 0, 1);

  // for (let x=0; x<width; x+=stepSize){
  //   for (let y=0; y<height; y+=stepSize){
  //     let luma = noise(x*0.005, y*0.02,t);
  //     let diameter = map(luma, 0, 1, 0, stepSize);
  //     ellipse(x,y,diameter,diameter);
  //   }
  // }
  // t+=0.05;

  for (let x=0; x<canvasDotWidth; x++){
    for (let y=0; y<canvasDotHeight; y++){
      let luma = noise(x*stepSize*0.005, y*stepSize*0.02,t);
      if (luma<0.8){
        luma = map(luma,0,0.7,0,1);
      }
      else{
        luma = map(luma,0.7,1,1,0.7);
      }
      if ((x>=imgStartWidth && x<imgEndWidth)&&(y>=imgStartHeight && y<imgEndHeight)){
        let i = ((y-imgStartHeight) * img.width + x-imgStartWidth) * 4;
        let r = img.pixels[i];
        let greyscale = map(r,0,255,0,1);
        if (greyscale<0.5){
          greyscale+=luma;
        }
        luma *= greyscale;
      }
      luma=lerp(luma,1-luma,stateT());
      let diameter = map(luma, 0, 1, 0, stepSize);
      ellipse(x*stepSize,y*stepSize,diameter,diameter);
    }
  }
  t+=0.05;
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
  resizeImage();
  // if(windowHeight > windowWidth){
  //   factor = windowHeight;
  //   factdiv = 1080;
  // }else{
  //   factor = windowWidth;
  //   factdiv = 1920;
  // }
}
</script>
  </body>
</html>
